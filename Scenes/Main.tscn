[gd_scene load_steps=23 format=2]

[ext_resource path="res://Scenes/Ship.tscn" type="PackedScene" id=1]
[ext_resource path="res://Assets/Environments/env_low.tres" type="Environment" id=2]
[ext_resource path="res://Scenes/Megastructures/Tower.tscn" type="PackedScene" id=3]
[ext_resource path="res://addons/zylann.hterrain/hterrain.gd" type="Script" id=4]
[ext_resource path="res://Scenes/UI/Pause.tscn" type="PackedScene" id=5]
[ext_resource path="res://Scenes/Target.tscn" type="PackedScene" id=6]
[ext_resource path="res://Scenes/Systems/TargetingSystem.tscn" type="PackedScene" id=7]
[ext_resource path="res://Scenes/MainData/data.hterrain" type="Resource" id=8]
[ext_resource path="res://addons/zylann.hterrain/hterrain_texture_set.gd" type="Script" id=9]
[ext_resource path="res://Scenes/Effects/HitEffect.tscn" type="PackedScene" id=10]
[ext_resource path="res://Scenes/Missile.tscn" type="PackedScene" id=11]
[ext_resource path="res://Scenes/Systems/MissilesSystem.tscn" type="PackedScene" id=12]
[ext_resource path="res://Scenes/UI/TargetRectStyleVisor.tscn" type="PackedScene" id=13]
[ext_resource path="res://Assets/Fonts/hydrogen.tres" type="DynamicFont" id=14]
[ext_resource path="res://Scenes/Creature/CreaturePart.tscn" type="PackedScene" id=15]
[ext_resource path="res://Scenes/Creature/CreatureTarget.tscn" type="PackedScene" id=16]
[ext_resource path="res://Scripts/CreatureManager.gd" type="Script" id=17]

[sub_resource type="GDScript" id=4]
script/source = "extends Node

export(bool) var has_started = false

onready var _Title: Control = $UI/Title
onready var _Ship: Spatial = $Ship
onready var _WorldAnimationPlayer: AnimationPlayer = $WorldAnimationPlayer

func _on_Ship_started_moving() -> void:
	if has_started:
		return
	
	has_started = true
	_WorldAnimationPlayer.play(\"title\")
"

[sub_resource type="Animation" id=6]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath("UI/Title:visible")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ false ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("UI/Title:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 1 ) ]
}

[sub_resource type="Animation" id=5]
resource_name = "title"
length = 5.0
tracks/0/type = "value"
tracks/0/path = NodePath("UI/Title:visible")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 5 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ true, false ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("UI/Title:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 3, 5 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 1 ), Color( 1, 1, 1, 1 ), Color( 1, 1, 1, 0 ) ]
}

[sub_resource type="Resource" id=7]
script = ExtResource( 9 )
mode = 0
textures = [ [  ], [  ] ]

[sub_resource type="Curve3D" id=8]
_data = {
"points": PoolVector3Array( -6.52838, -0.141525, -170.267, 6.52838, 0.141525, 170.267, -342.084, 203.305, 34.9019, -244.524, 31.5967, 23.7056, 244.524, -31.5967, -23.7056, 46.1322, 69.7612, 422.454, -1.31482, -14.9869, 87.3883, 1.31482, 14.9869, -87.3883, 328.3, 135.263, 20.7712, 117.16, -51.6188, 48.3848, -117.16, 51.6188, -48.3848, 236.658, 282.274, -285.241, 201.929, 118.84, -107.691, -201.929, -118.84, 107.691, -37.8966, 400.315, -345.319, -6.52838, -0.141525, -170.267, 6.52838, 0.141525, 170.267, -342.084, 203.305, 34.9019 ),
"tilts": PoolRealArray( 0, 0, 0, 0, 0, 0 )
}

[node name="Main" type="Node"]
script = SubResource( 4 )

[node name="WorldAnimationPlayer" type="AnimationPlayer" parent="."]
anims/RESET = SubResource( 6 )
anims/title = SubResource( 5 )

[node name="UI" type="CanvasLayer" parent="."]

[node name="Title" type="Control" parent="UI"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0

[node name="Label" type="Label" parent="UI/Title"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_fonts/font = ExtResource( 14 )
text = "Faraway
Space"
align = 1
valign = 1

[node name="Pause" parent="UI" instance=ExtResource( 5 )]
visible = false

[node name="Ship" parent="." instance=ExtResource( 1 )]
transform = Transform( -0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, -0.707107, 832, 10, 538 )

[node name="TargetingSystem" parent="Ship" instance=ExtResource( 7 )]
target_visual = ExtResource( 13 )
raycast_mask = 0
max_targeting_distance = 200.0
target_rect_grow = 0.2

[node name="MissilesSystem" parent="Ship" instance=ExtResource( 12 )]
targeting_system = NodePath("../TargetingSystem")
missile = ExtResource( 11 )
hit_effect = ExtResource( 10 )
shoot_cooldown = 0.2

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource( 2 )

[node name="World" type="Spatial" parent="."]

[node name="DirectionalLight" type="DirectionalLight" parent="World"]
transform = Transform( -0.939693, 0.196175, -0.280166, 0, 0.819152, 0.573577, 0.34202, 0.538986, -0.769751, 0, 0, 0 )
shadow_enabled = true
directional_shadow_split_1 = 0.05
directional_shadow_normal_bias = 1.0
directional_shadow_bias_split_scale = 0.5
directional_shadow_max_distance = 500.0

[node name="HTerrain" type="Spatial" parent="World"]
script = ExtResource( 4 )
lod_scale = 2.0
_terrain_data = ExtResource( 8 )
chunk_size = 32
collision_enabled = true
collision_layer = 1
collision_mask = 1
shader_type = "Classic4Lite"
custom_shader = null
custom_globalmap_shader = null
texture_set = SubResource( 7 )
shader_params/u_ground_uv_scale = 20
shader_params/u_depth_blending = true
shader_params/u_triplanar = false
shader_params/u_tile_reduction = Plane( 0, 0, 0, 0 )

[node name="Path" type="Path" parent="World"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1024, 0, 1024 )
curve = SubResource( 8 )
script = ExtResource( 17 )
managed_parts = [ NodePath("CreaturePart"), NodePath("CreaturePart2"), NodePath("CreaturePart3"), NodePath("CreaturePart4"), NodePath("CreaturePart5"), NodePath("CreaturePart6"), NodePath("CreaturePart7"), NodePath("CreaturePart8"), NodePath("CreaturePart9"), NodePath("CreaturePart10"), NodePath("CreaturePart11"), NodePath("CreaturePart12"), NodePath("CreaturePart13"), NodePath("CreaturePart14"), NodePath("CreaturePart15"), NodePath("CreaturePart16") ]

[node name="CreaturePart" parent="World/Path" instance=ExtResource( 15 )]
transform = Transform( 0.999254, -2.12485e-05, 0.0386279, 1.81899e-12, 1, 0.000550081, -0.0386279, -0.000549671, 0.999252, -342.084, 203.305, 34.9019 )
rotation_mode = 4

[node name="CreaturePart2" parent="World/Path" instance=ExtResource( 15 )]
transform = Transform( 0.997503, 0.00136284, 0.0706099, 0.000378839, 0.999696, -0.0246468, -0.0706221, 0.0246121, 0.997198, -341.462, 203.168, 46.2498 )
offset = 10.0
rotation_mode = 4

[node name="CreatureTarget" parent="World/Path/CreaturePart2" instance=ExtResource( 16 )]
creature_manager = NodePath("../..")

[node name="CreaturePart3" parent="World/Path" instance=ExtResource( 15 )]
transform = Transform( 0.994803, 0.00343519, 0.101758, 0.00151448, 0.998821, -0.0485245, -0.101804, 0.0484265, 0.993625, -340.465, 202.745, 57.7562 )
offset = 20.0
rotation_mode = 4

[node name="CreaturePart4" parent="World/Path" instance=ExtResource( 15 )]
transform = Transform( 0.991273, 0.00598927, 0.131686, 0.00330017, 0.997527, -0.0702111, -0.131781, 0.070033, 0.988802, -339.093, 202.048, 69.4247 )
offset = 30.0
rotation_mode = 4

[node name="CreaturePart5" parent="World/Path" instance=ExtResource( 15 )]
transform = Transform( 0.987071, 0.00895849, 0.160034, 0.00560359, 0.995898, -0.090311, -0.160187, 0.0900404, 0.982969, -337.346, 201.088, 81.2339 )
offset = 40.0
rotation_mode = 4

[node name="CreaturePart6" parent="World/Path" instance=ExtResource( 15 )]
transform = Transform( 0.982081, 0.0122613, 0.18806, 0.00845184, 0.994011, -0.108945, -0.188269, 0.108583, 0.976095, -335.227, 199.876, 93.1626 )
offset = 50.0
rotation_mode = 4

[node name="CreatureTarget" parent="World/Path/CreaturePart6" instance=ExtResource( 16 )]
creature_manager = NodePath("../..")

[node name="CreaturePart7" parent="World/Path" instance=ExtResource( 15 )]
transform = Transform( 0.976389, 0.0158406, 0.21544, 0.0117678, 0.991927, -0.126265, -0.215701, 0.125819, 0.968319, -332.737, 198.423, 105.189 )
offset = 60.0
rotation_mode = 4

[node name="CreaturePart8" parent="World/Path" instance=ExtResource( 15 )]
transform = Transform( 0.970171, 0.0196683, 0.241623, 0.01542, 0.989679, -0.142475, -0.241931, 0.141951, 0.959853, -329.878, 196.74, 117.293 )
offset = 70.0
rotation_mode = 4

[node name="CreaturePart9" parent="World/Path" instance=ExtResource( 15 )]
transform = Transform( 0.963392, 0.0235585, 0.267058, 0.0194078, 0.98739, -0.157114, -0.267392, 0.156546, 0.950785, -326.65, 194.837, 129.453 )
offset = 80.0
rotation_mode = 4

[node name="CreaturePart10" parent="World/Path" instance=ExtResource( 15 )]
transform = Transform( 0.957784, 0.0266338, 0.28625, 0.0226988, 0.985585, -0.167652, -0.286589, 0.167072, 0.943372, -323.903, 193.222, 138.88 )
offset = 90.0
rotation_mode = 4

[node name="CreatureTarget" parent="World/Path/CreaturePart10" instance=ExtResource( 16 )]
creature_manager = NodePath("../..")

[node name="CreaturePart11" parent="World/Path" instance=ExtResource( 15 )]
transform = Transform( 0.952564, 0.0292927, 0.302924, 0.0257494, 0.984031, -0.176126, -0.303246, 0.175572, 0.936598, -321.359, 191.734, 147.016 )
offset = 100.0
rotation_mode = 4

[node name="CreaturePart12" parent="World/Path" instance=ExtResource( 15 )]
transform = Transform( 0.94724, 0.0321054, 0.318913, 0.0288426, 0.982397, -0.184568, -0.319224, 0.184028, 0.929639, -318.653, 190.161, 155.153 )
offset = 110.0
rotation_mode = 4

[node name="CreaturePart13" parent="World/Path" instance=ExtResource( 15 )]
transform = Transform( 0.941565, 0.034939, 0.335013, 0.0321169, 0.980761, -0.192549, -0.335297, 0.192058, 0.922325, -315.785, 188.505, 163.286 )
offset = 120.0
rotation_mode = 4

[node name="CreaturePart14" parent="World/Path" instance=ExtResource( 15 )]
transform = Transform( 0.935583, 0.0376802, 0.35109, 0.0355404, 0.979192, -0.199797, -0.351314, 0.199405, 0.914774, -312.757, 186.771, 171.407 )
offset = 130.0
rotation_mode = 4

[node name="CreatureTarget" parent="World/Path/CreaturePart14" instance=ExtResource( 16 )]
creature_manager = NodePath("../..")

[node name="CreaturePart15" parent="World/Path" instance=ExtResource( 15 )]
transform = Transform( 0.92944, 0.0405796, 0.366735, 0.0390255, 0.977547, -0.207071, -0.366904, 0.206772, 0.906987, -309.568, 184.96, 179.51 )
offset = 140.0
rotation_mode = 4

[node name="CreaturePart16" parent="World/Path" instance=ExtResource( 15 )]
transform = Transform( 0.92289, 0.0432977, 0.382623, 0.0427055, 0.97602, -0.213452, -0.38269, 0.213333, 0.898908, -306.218, 183.078, 187.59 )
offset = 150.0
rotation_mode = 4

[node name="Tower" parent="World" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1024, 0, 1024 )

[node name="Target" parent="World" instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1024, 20, 1024 )

[connection signal="started_moving" from="Ship" to="." method="_on_Ship_started_moving"]
